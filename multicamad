<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pengeluaran Malaysia</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, select, button { padding: 5px; margin: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h2>Pengeluaran Selama di Malaysia</h2>

  <div>
    <label>Nama Pembayar:</label>
    <select id="payer">
      <option value="Njel">Njel</option>
      <option value="Ria">Ria</option>
      <option value="Ira">Ira</option>
    </select><br>

    <label>Nominal (RM):</label>
    <input type="number" id="amount" placeholder="Contoh: 50"><br>

    <label>Deskripsi:</label>
    <input type="text" id="desc" placeholder="Contoh: Makan siang"><br>

    <label>Split Bill:</label>
    <input type="checkbox" id="split"> Bagi 3<br>

    <button onclick="addExpense()">Tambah Pengeluaran</button>
  </div>

  <h3>Daftar Pengeluaran</h3>
  <table id="expenseTable">
    <thead>
      <tr>
        <th>Pembayar</th>
        <th>Nominal (RM)</th>
        <th>Deskripsi</th>
        <th>Split Bill</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>Rekap Per Orang</h3>
  <table id="summaryTable">
    <thead>
      <tr>
        <th>Nama</th>
        <th>Total Bayar</th>
        <th>Harus Diterima / Dibayar</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>Njel</td><td id="totalNjel">0</td><td id="balanceNjel">0</td></tr>
      <tr><td>Ria</td><td id="totalRia">0</td><td id="balanceRia">0</td></tr>
      <tr><td>Ira</td><td id="totalIra">0</td><td id="balanceIra">0</td></tr>
    </tbody>
  </table>

  <script>
    let expenses = [];

    function addExpense() {
      const payer = document.getElementById('payer').value;
      const amount = parseFloat(document.getElementById('amount').value);
      const desc = document.getElementById('desc').value;
      const split = document.getElementById('split').checked;

      if (!amount || !desc) {
        alert("Masukkan nominal dan deskripsi!");
        return;
      }

      const expense = { payer, amount, desc, split };
      expenses.push(expense);
      renderTable();
      updateSummary();
    }

    function renderTable() {
      const tbody = document.querySelector("#expenseTable tbody");
      tbody.innerHTML = "";
      expenses.forEach(exp => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${exp.payer}</td>
          <td>${exp.amount.toFixed(2)}</td>
          <td>${exp.desc}</td>
          <td>${exp.split ? "Ya" : "Tidak"}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function updateSummary() {
      let totals = { Njel: 0, Ria: 0, Ira: 0 };
      let balances = { Njel: 0, Ria: 0, Ira: 0 };

      expenses.forEach(exp => {
        totals[exp.payer] += exp.amount;
        if (exp.split) {
          const share = exp.amount / 3;
          balances.Njel += share;
          balances.Ria += share;
          balances.Ira += share;
          balances[exp.payer] -= exp.amount; // karena sudah bayar
        }
      });

      document.getElementById("totalNjel").textContent = totals.Njel.toFixed(2);
      document.getElementById("totalRia").textContent = totals.Ria.toFixed(2);
      document.getElementById("totalIra").textContent = totals.Ira.toFixed(2);

      document.getElementById("balanceNjel").textContent = balances.Njel.toFixed(2);
      document.getElementById("balanceRia").textContent = balances.Ria.toFixed(2);
      document.getElementById("balanceIra").textContent = balances.Ira.toFixed(2);
    }
  </script>
</body>
</html>